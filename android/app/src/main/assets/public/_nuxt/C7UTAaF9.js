import{_ as y}from"./DsOKFDKE.js";import{e as w,r as a,c as n,a as s,f as g,j as h,k as _,g as d,l as u,t as k,d as x,b as j,w as V,o as c,m as C}from"./S-9llA6t.js";import{_ as N}from"./Cgl_VtuV.js";import{u as P}from"./-ECo5pt8.js";const S={class:"min-h-screen bg-gray-100 flex flex-col justify-center px-4 py-6 sm:px-6 lg:px-8 relative"},B={class:"relative z-10"},T={class:"mx-auto w-full max-w-[340px] sm:max-w-md md:max-w-lg"},U={class:"bg-white/90 backdrop-blur-md py-8 px-6 shadow-lg rounded-2xl"},q={class:"mt-1 flex items-center"},R={class:"mt-1 flex items-center"},z={class:"mt-1 flex items-center"},E={class:"mt-1 flex items-center"},M={key:0,class:"text-red-500 text-sm text-center"},A=["disabled"],D={key:0,class:"flex items-center"},L={key:1},O={class:"mt-6"},H={class:"mt-6"},Q=w({__name:"register",setup(J){const m=a(""),p=a(""),r=a(""),f=a("");P();const l=a(""),i=a(!1),b=async()=>{try{if(r.value!==f.value){l.value="รหัสผ่านไม่ตรงกัน";return}i.value=!0,l.value="";const o=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.value,email:p.value,password:r.value})}),e=await o.json();if(!o.ok)throw new Error(e.message||"Registration failed");await C("/login")}catch(o){l.value=o instanceof Error?o.message:"เกิดข้อผิดพลาดระหว่างการสมัครสมาชิก",console.error("Registration error:",o)}finally{i.value=!1}};return(o,e)=>{const v=y;return c(),n("div",S,[e[12]||(e[12]=s("div",{class:"absolute inset-0 bg-[url('/research.jpg')] bg-cover bg-center opacity-40 backdrop-blur-sm"},null,-1)),s("div",B,[e[11]||(e[11]=g('<div class="mx-auto w-full max-w-[340px] sm:max-w-md md:max-w-lg"><div class="flex justify-center mb-2"><img src="'+N+'" alt="PBRU Logo" class="h-20 w-20 object-contain"></div><h2 class="text-center text-2xl sm:text-3xl font-bold text-gray-900 mb-2"> สร้างบัญชีผู้ใช้ใหม่ </h2><p class="text-center text-gray-500 text-sm mb-4">กรุณากรอกข้อมูลให้ครบถ้วน</p></div>',1)),s("div",T,[s("div",U,[s("form",{class:"space-y-5",onSubmit:h(b,["prevent"])},[s("div",null,[e[4]||(e[4]=s("label",{for:"name",class:"block text-base font-medium text-gray-700"}," ชื่อ-นามสกุล ",-1)),s("div",q,[d(s("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),name:"name",type:"text",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-base",placeholder:"ชื่อ-นามสกุล"},null,512),[[u,m.value]])])]),s("div",null,[e[5]||(e[5]=s("label",{for:"email",class:"block text-base font-medium text-gray-700"}," อีเมล ",-1)),s("div",R,[d(s("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),name:"email",type:"email",autocomplete:"email",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-base",placeholder:"example@email.com"},null,512),[[u,p.value]])])]),s("div",null,[e[6]||(e[6]=s("label",{for:"password",class:"block text-base font-medium text-gray-700"}," รหัสผ่าน ",-1)),s("div",z,[d(s("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),name:"password",type:"password",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-base",placeholder:"รหัสผ่าน"},null,512),[[u,r.value]])])]),s("div",null,[e[7]||(e[7]=s("label",{for:"confirmPassword",class:"block text-base font-medium text-gray-700"}," ยืนยันรหัสผ่าน ",-1)),s("div",E,[d(s("input",{id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),name:"confirmPassword",type:"password",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-base",placeholder:"ยืนยันรหัสผ่าน"},null,512),[[u,f.value]])])]),l.value?(c(),n("div",M,k(l.value),1)):_("",!0),s("div",null,[s("button",{type:"submit",disabled:i.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[i.value?(c(),n("span",D,e[8]||(e[8]=[s("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-95",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-100",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" กำลังสมัครสมาชิก... ")]))):(c(),n("span",L,"สมัครสมาชิก"))],8,A)])],32),s("div",O,[e[10]||(e[10]=g('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500"> มีบัญชีอยู่แล้ว? </span></div></div>',1)),s("div",H,[j(v,{to:"/login",class:"w-full flex justify-center py-2.5 px-4 border border-gray-300 rounded-lg shadow-sm text-base font-medium text-indigo-600 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},{default:V(()=>e[9]||(e[9]=[x(" เข้าสู่ระบบ ")])),_:1})])])])])])])}}});export{Q as default};
