import{_ as N}from"./DsOKFDKE.js";import{e as B,r,i as E,c as i,a as e,j as S,k as f,g as _,l as h,n as k,t as v,d as x,b as V,w as j,f as z,o as n,m as L}from"./S-9llA6t.js";import{_ as M}from"./Cgl_VtuV.js";import{u as T}from"./-ECo5pt8.js";const U={class:"min-h-screen flex flex-col justify-center px-4 py-4 sm:px-6 lg:px-8 relative bg-gradient-to-br from-blue-100 via-blue-200 to-green-100"},q={class:"relative z-10"},A={class:"mt-6 mx-auto w-full max-w-[340px] sm:max-w-md md:max-w-lg"},D={class:"bg-white/90 backdrop-blur-md py-8 px-6 shadow-lg rounded-2xl"},I={class:"mt-1"},P={key:0,class:"mt-1 text-xs text-red-600"},R={class:"mt-1"},F={key:0,class:"mt-1 text-xs text-red-600"},H={key:0,class:"text-red-500 text-xs text-center"},$=["disabled"],G={key:0,class:"flex items-center"},J={key:1},K={class:"text-center"},O={class:"mt-6"},Q={class:"mt-6"},te=B({__name:"login",setup(W){const a=r(""),l=r(""),u=r(""),c=r(!1),s=r(""),o=r(""),p=T(),g=()=>{const d=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;a.value?d.test(a.value)?s.value="":s.value="รูปแบบอีเมลไม่ถูกต้อง":s.value="กรุณากรอกอีเมล"},b=()=>{l.value?l.value.length<6?o.value="รหัสผ่านต้องมีความยาวอย่างน้อย 6 ตัวอักษร":o.value="":o.value="กรุณากรอกรหัสผ่าน"},w=E(()=>!s.value&&!o.value&&a.value&&l.value),C=async()=>{var d;try{if(c.value=!0,u.value="",g(),b(),!w.value)return;if(await p.login(a.value,l.value),((d=p.user)==null?void 0:d.role)==="admin")await L("/admin/dashboard");else throw new Error("ระบบปัจจุบันรองรับเฉพาะผู้ดูแลระบบเท่านั้น")}catch(t){u.value=t.message||"อีเมลหรือรหัสผ่านไม่ถูกต้อง"}finally{c.value=!1}};return(d,t)=>{const y=N;return n(),i("div",U,[e("div",q,[t[8]||(t[8]=e("div",{class:"mx-auto w-full max-w-[340px] sm:max-w-md md:max-w-lg"},[e("div",{class:"flex justify-center"},[e("img",{src:M,alt:"PBRU Logo",class:"h-32 w-32 sm:h-28 object-contain"})]),e("h2",{class:"mt-4 text-center text-xl sm:text-2xl font-bold text-gray-900"}," กรุณาเข้าสู่ระบบ ")],-1)),e("div",A,[e("div",D,[e("form",{class:"space-y-6",onSubmit:S(C,["prevent"])},[e("div",null,[t[2]||(t[2]=e("label",{for:"email",class:"block text-base font-medium text-gray-700"}," อีเมล ",-1)),e("div",I,[_(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=m=>a.value=m),name:"email",type:"email",autocomplete:"email",required:"",class:k(["appearance-none block w-full px-4 py-3 border rounded-lg text-base focus:ring-2 focus:ring-offset-0",s.value?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-indigo-500"]),onInput:g},null,34),[[h,a.value]]),s.value?(n(),i("p",P,v(s.value),1)):f("",!0)])]),e("div",null,[t[3]||(t[3]=e("label",{for:"password",class:"block text-base font-medium text-gray-700"}," รหัสผ่าน ",-1)),e("div",R,[_(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=m=>l.value=m),name:"password",type:"password",autocomplete:"current-password",required:"",class:k(["appearance-none block w-full px-4 py-3 border rounded-lg text-base focus:ring-2 focus:ring-offset-0",o.value?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-indigo-500"]),onInput:b},null,34),[[h,l.value]]),o.value?(n(),i("p",F,v(o.value),1)):f("",!0)])]),u.value?(n(),i("div",H,v(u.value),1)):f("",!0),e("div",null,[e("button",{type:"submit",disabled:c.value||!w.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[c.value?(n(),i("span",G,t[4]||(t[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-95",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-100",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" กำลังเข้าสู่ระบบ... ")]))):(n(),i("span",J,"เข้าสู่ระบบ"))],8,$)]),e("div",K,[V(y,{to:"/forgot-password",class:"text-sm text-indigo-600 hover:text-indigo-500"},{default:j(()=>t[5]||(t[5]=[x(" ลืมรหัสผ่าน? ")])),_:1})])],32),e("div",O,[t[7]||(t[7]=z('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-xs"><span class="px-2 bg-white text-gray-500"> หรือ </span></div></div>',1)),e("div",Q,[V(y,{to:"/register",class:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-lg shadow-sm text-base font-medium text-indigo-600 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},{default:j(()=>t[6]||(t[6]=[x(" สร้างบัญชีใหม่ ")])),_:1})])])])])])])}}});export{te as default};
