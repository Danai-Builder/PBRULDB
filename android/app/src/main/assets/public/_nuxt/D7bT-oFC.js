const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BrFSAhV0.js","./S-9llA6t.js","./entry.DYdBUn4G.css"])))=>i.map(i=>d[i]);
import{e as ce,r as i,i as D,u as ve,K as pe,c as d,b as V,a as t,k as c,w as $,t as s,d as g,j as me,g as y,l as A,q as I,F as N,h as T,n as xe,o as n,E as P,G as E,D as ye,_ as q}from"./S-9llA6t.js";import{_ as be,a as ke}from"./CtKOI467.js";import{_ as fe}from"./QDSvIp5v.js";import{_ as he}from"./DlAUqK2U.js";import"./DsOKFDKE.js";import"./Cgl_VtuV.js";import"./-ECo5pt8.js";const we={class:"min-h-screen bg-gray-100 dark:bg-gray-900 flex"},_e={class:"flex-1 flex flex-col min-h-screen"},Ce={class:"flex-1 p-6"},Me={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},De={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6"},Le={class:"flex items-center"},je={class:"ml-4"},Be={class:"text-2xl font-semibold text-gray-900 dark:text-white"},Ve={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6"},Ae={class:"flex items-center"},ze={class:"ml-4"},Ue={class:"text-2xl font-semibold text-gray-900 dark:text-white"},Se={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6"},Fe={class:"flex items-center"},Ne={class:"ml-4"},Te={class:"text-2xl font-semibold text-gray-900 dark:text-white"},He={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6"},$e={class:"flex items-center"},Ie={class:"ml-4"},Pe={class:"text-sm font-semibold text-gray-900 dark:text-white"},Ee={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8"},qe={class:"flex items-center justify-between mb-6"},Oe={key:0,class:"border-t pt-6"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ye=["value"],Ge={class:"flex items-center gap-4"},Ke=["value"],Qe=["value"],Xe={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-lg hover:border-blue-500 transition"},Ze={class:"space-y-1 text-center"},Je={class:"flex text-sm text-gray-600 dark:text-gray-400"},We={class:"relative cursor-pointer bg-white dark:bg-gray-700 rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500"},et={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},tt={class:"flex justify-end space-x-4"},lt=["disabled"],rt={key:0,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ot={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8"},at={class:"flex flex-col md:flex-row gap-4"},st={class:"flex-1"},nt={class:"relative"},dt={class:"w-full md:w-64"},it=["value"],ut={class:"w-full md:w-48"},gt=["value"],ct={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg"},vt={class:"p-6 border-b border-gray-200 dark:border-gray-700"},pt={class:"text-xl font-bold text-gray-900 dark:text-white"},mt={class:"divide-y divide-gray-200 dark:divide-gray-700"},xt={class:"flex items-start justify-between"},yt={class:"flex-1"},bt={class:"flex items-center space-x-3 mb-2"},kt={class:"text-lg font-semibold text-gray-900 dark:text-white"},ft={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},ht={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},wt={key:0,class:"text-gray-700 dark:text-gray-300 text-sm mb-3 line-clamp-3"},_t={class:"flex items-center space-x-4 text-sm flex-wrap gap-y-2"},Ct=["onClick"],Mt=["onClick"],Dt=["onClick"],Lt=["onClick"],jt=["onClick"],Bt={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700"},Vt={class:"flex items-center justify-between"},At={class:"text-sm text-gray-700 dark:text-gray-400"},zt={class:"flex space-x-2"},Ut=["disabled"],St={class:"px-3 py-1 text-gray-700 dark:text-gray-300"},Ft=["disabled"],Nt={key:1,class:"p-12 text-center"},Tt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4"},Ht={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl"},$t={class:"p-6"},It={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Pt={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},Et={class:"h-96 w-full relative rounded-lg overflow-hidden border dark:border-gray-600"},qt={class:"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-end gap-4 rounded-b-lg"},Ot={key:1,class:"fixed top-4 right-4 z-50"},Rt={class:"flex items-center"},Yt={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Gt={key:1,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Kt=ce({__name:"abstract",setup(Qt){const G=E(()=>q(()=>import("./BrFSAhV0.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(l=>l.LMap)),K=E(()=>q(()=>import("./BrFSAhV0.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(l=>l.LTileLayer)),Q=E(()=>q(()=>import("./BrFSAhV0.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(l=>l.LMarker)),w=i(!1),L=i(!1),_=i(null),b=i(null),j=i(""),z=i(""),U=i(""),m=i(1),C=i(10),B=i(!1),k=i(!1),S=i([13.1119,99.9447]),F=i(10),p=i(null),o=i({title:"",category:"",author:"",year:new Date().getFullYear(),abstract:"",latitude:null,longitude:null}),H=i(["วิจัยพื้นฐาน","วิจัยประยุกต์"]),v=i([{id:1,title:"การพัฒนาระบบจัดการข้อมูลนักศึกษาด้วยเทคโนโลยี AI",category:"เทคโนโลยีและนวัตกรรม",author:"ดร.สมชาย วิทยากร",year:2024,abstract:"งานวิจัยนี้นำเสนอการพัฒนาระบบจัดการข้อมูลนักศึกษาที่ใช้เทคโนโลยีปัญญาประดิษฐ์ในการวิเคราะห์และจัดการข้อมูล เพื่อเพิ่มประสิทธิภาพในการบริหารจัดการสถานศึกษา",uploadDate:new Date("2024-01-15"),fileUrl:"https://drive.google.com/file/d/example1",fileName:"AI_Student_Management_System.pdf",latitude:12.919,longitude:99.8824},{id:2,title:"ผลกระทบของการเปลี่ยนแปลงสภาพภูมิอากาศต่อการเกษตรในภาคกลาง",category:"สิ่งแวดล้อม",author:"ผศ.ดร.วิรัตน์ สิ่งแวดล้อม",year:2024,abstract:"การศึกษาผลกระทบของการเปลี่ยนแปลงสภาพภูมิอากาศที่มีต่อภาคการเกษตรในภาคกลางของประเทศไทย พร้อมเสนอแนะแนวทางการปรับตัวที่เหมาะสม",uploadDate:new Date("2024-01-10"),fileUrl:"https://drive.google.com/file/d/example2",fileName:"Climate_Change_Agriculture.pdf",latitude:13.1751,longitude:99.991},{id:3,title:"การยกระดับคุณภาพการศึกษาด้วยการจัดการเรียนรู้แบบผสมผสาน",category:"ศึกษาศาสตร์",author:"อาจารย์สุมาลี การศึกษา",year:2023,abstract:"งานวิจัยเกี่ยวกับการพัฒนารูปแบบการจัดการเรียนรู้แบบผสมผสานที่เหมาะสมกับบริบทของการศึกษาไทย เพื่อยกระดับคุณภาพการศึกษา",uploadDate:new Date("2023-12-20"),fileUrl:"https://drive.google.com/file/d/example3",fileName:"Blended_Learning_Quality.pdf",latitude:null,longitude:null}]),f=D(()=>{let l=v.value;if(j.value){const e=j.value.toLowerCase();l=l.filter(a=>a.title.toLowerCase().includes(e)||a.author.toLowerCase().includes(e)||a.abstract.toLowerCase().includes(e))}return z.value&&(l=l.filter(e=>e.category===z.value)),U.value&&(l=l.filter(e=>e.year.toString()===U.value)),l.sort((e,a)=>new Date(a.uploadDate).getTime()-new Date(e.uploadDate).getTime())}),X=D(()=>{const l=(m.value-1)*C.value,e=l+C.value;return f.value.slice(l,e)}),O=D(()=>Math.ceil(f.value.length/C.value)),Z=D(()=>[...new Set(v.value.map(e=>e.year))].sort((e,a)=>a-e)),J=D(()=>{const l=new Date().toDateString();return v.value.filter(e=>new Date(e.uploadDate).toDateString()===l).length}),W=D(()=>{if(v.value.length===0)return"ไม่มีข้อมูล";const l=v.value.reduce((e,a)=>new Date(a.uploadDate)>new Date(e.uploadDate)?a:e);return R(l.uploadDate)}),ee=l=>{const e=l.target;e.files&&e.files[0]&&(b.value=e.files[0])},te=l=>{if(l===0)return"0 Bytes";const e=1024,a=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,x)).toFixed(2))+" "+a[x]},R=l=>new Intl.DateTimeFormat("th-TH",{year:"numeric",month:"long",day:"numeric"}).format(new Date(l)),le=()=>{if(k.value=!1,o.value.latitude&&o.value.longitude){const l=Number(o.value.latitude),e=Number(o.value.longitude);p.value=[l,e],S.value=[l,e],F.value=14}else p.value=null,S.value=[13.1119,99.9447],F.value=10;B.value=!0},re=l=>{k.value||l.latlng&&(p.value=[l.latlng.lat,l.latlng.lng])},oe=()=>{p.value&&(o.value.latitude=p.value[0],o.value.longitude=p.value[1]),B.value=!1},ae=()=>{B.value=!1},se=async()=>{var l,e;if(!b.value){h("กรุณาเลือกไฟล์","error");return}L.value=!0;try{const a=new FormData;a.append("file",b.value),a.append("title",o.value.title),a.append("category",o.value.category),a.append("author",o.value.author),a.append("year",o.value.year.toString()),a.append("abstract",o.value.abstract),a.append("latitude",((l=o.value.latitude)==null?void 0:l.toString())??""),a.append("longitude",((e=o.value.longitude)==null?void 0:e.toString())??"");const x=await $fetch("/api/abstract/upload",{method:"POST",body:a}),u=x.data;if(x.success&&u){const r=v.value.length>0?Math.max(...v.value.map(M=>M.id))+1:1;v.value.unshift({id:r,title:u.title,category:u.category,author:u.author,year:u.year,abstract:u.abstract,latitude:u.latitude?Number(u.latitude):null,longitude:u.longitude?Number(u.longitude):null,uploadDate:new Date(u.uploadDate),fileUrl:u.webViewLink,fileName:u.fileName}),h(x.message||"อัปโหลดงานวิจัยสำเร็จ","success"),Y()}else throw new Error("อัปโหลดไม่สำเร็จ")}catch(a){console.error("Upload error:",a),h(a.message||"เกิดข้อผิดพลาดในการอัปโหลด","error")}L.value=!1},ne=l=>{l.fileUrl&&window.open(l.fileUrl,"_blank")},de=l=>{l.latitude&&l.longitude&&(k.value=!0,p.value=[l.latitude,l.longitude],S.value=[l.latitude,l.longitude],F.value=14,B.value=!0)},ie=async l=>{try{const e=document.createElement("a");e.href=l.fileUrl,e.download=l.fileName,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e),h("เริ่มดาวน์โหลดไฟล์","success")}catch{h("ไม่สามารถดาวน์โหลดไฟล์ได้","error")}},ue=l=>{o.value={...l},w.value=!0,h("โหลดข้อมูลสำหรับแก้ไข","success")},ge=l=>{if(confirm(`คุณต้องการลบงานวิจัย "${l.title}" หรือไม่?`)){const e=v.value.findIndex(a=>a.id===l.id);e>-1&&(v.value.splice(e,1),h("ลบงานวิจัยสำเร็จ","success"))}},Y=()=>{o.value={title:"",category:"",author:"",year:new Date().getFullYear(),abstract:"",latitude:null,longitude:null},b.value=null,w.value=!1;const l=document.querySelector('input[type="file"]');l&&(l.value="")},h=(l,e)=>{_.value={text:l,type:e},setTimeout(()=>{_.value=null},5e3)};return ve(()=>{const e=pe().query.search;e&&(j.value=Array.isArray(e)?e[0]||"":e)}),(l,e)=>{const a=ke,x=be,u=fe;return n(),d("div",we,[V(a,{"current-page":"abstract"}),t("div",_e,[V(x,null,{title:$(()=>e[11]||(e[11]=[g("จัดการงานวิจัย Abstract")])),_:1}),t("div",Ce,[t("div",Me,[t("div",De,[t("div",Le,[e[13]||(e[13]=t("div",{class:"p-3 rounded-full bg-blue-100 dark:bg-blue-900"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",je,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"งานวิจัยทั้งหมด",-1)),t("p",Be,s(v.value.length),1)])])]),t("div",Ve,[t("div",Ae,[e[15]||(e[15]=t("div",{class:"p-3 rounded-full bg-green-100 dark:bg-green-900"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),t("div",ze,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"อัปโหลดวันนี้",-1)),t("p",Ue,s(J.value),1)])])]),t("div",Se,[t("div",Fe,[e[17]||(e[17]=t("div",{class:"p-3 rounded-full bg-purple-100 dark:bg-purple-900"},[t("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1)),t("div",Ne,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"หมวดหมู่",-1)),t("p",Te,s(H.value.length),1)])])]),t("div",He,[t("div",$e,[e[19]||(e[19]=t("div",{class:"p-3 rounded-full bg-orange-100 dark:bg-orange-900"},[t("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",Ie,[e[18]||(e[18]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"ล่าสุด",-1)),t("p",Pe,s(W.value),1)])])])]),t("div",Ee,[t("div",qe,[e[21]||(e[21]=t("h2",{class:"text-xl font-bold text-gray-900 dark:text-white flex items-center"},[t("svg",{class:"w-6 h-6 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),g(" อัปโหลดงานวิจัย Abstract ")],-1)),t("button",{onClick:e[0]||(e[0]=r=>w.value=!w.value),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center"},[e[20]||(e[20]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)),g(" "+s(w.value?"ซ่อนฟอร์ม":"เพิ่มงานวิจัย"),1)])]),w.value?(n(),d("div",Oe,[t("form",{onSubmit:me(se,["prevent"]),class:"space-y-6"},[t("div",Re,[t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ชื่อเรื่องงานวิจัย * ",-1)),y(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.title=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"กรอกชื่อเรื่องงานวิจัย"},null,512),[[A,o.value.title]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," หมวดหมู่ * ",-1)),y(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.category=r),required:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e[23]||(e[23]=t("option",{value:""},"เลือกหมวดหมู่",-1)),(n(!0),d(N,null,T(H.value,r=>(n(),d("option",{key:r,value:r},s(r),9,Ye))),128))],512),[[I,o.value.category]])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ผู้วิจัย * ",-1)),y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.author=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"ชื่อผู้วิจัย"},null,512),[[A,o.value.author]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ปีที่ทำการวิจัย * ",-1)),y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.value.year=r),type:"number",min:"2000",max:"2030",required:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"2024"},null,512),[[A,o.value.year]])])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," บทคัดย่อ ",-1)),y(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=r=>o.value.abstract=r),rows:"4",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"กรอกบทคัดย่อของงานวิจัย"},null,512),[[A,o.value.abstract]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ตำแหน่ง (ถ้ามี) ",-1)),t("div",Ge,[t("input",{value:o.value.latitude?o.value.latitude.toFixed(6):"",type:"text",readonly:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-900 cursor-not-allowed",placeholder:"ละติจูด"},null,8,Ke),t("input",{value:o.value.longitude?o.value.longitude.toFixed(6):"",type:"text",readonly:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-900 cursor-not-allowed",placeholder:"ลองจิจูด"},null,8,Qe),t("button",{onClick:le,type:"button",class:"px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition whitespace-nowrap flex items-center"},e[28]||(e[28]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1),g(" ระบุตำแหน่ง ")]))])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ไฟล์ Abstract (PDF) * ",-1)),t("div",Xe,[t("div",Ze,[e[32]||(e[32]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[t("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("div",Je,[t("label",We,[e[30]||(e[30]=t("span",null,"เลือกไฟล์",-1)),t("input",{ref:"fileInput",type:"file",accept:".pdf,.doc,.docx",class:"sr-only",onChange:ee,required:""},null,544)]),e[31]||(e[31]=t("p",{class:"pl-1"},"หรือลากวางไฟล์",-1))]),e[33]||(e[33]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," PDF, DOC, DOCX ขนาดไม่เกิน 10MB ",-1))])]),b.value?(n(),d("div",et," ไฟล์ที่เลือก: "+s(b.value.name)+" ("+s(te(b.value.size))+") ",1)):c("",!0)]),t("div",tt,[t("button",{type:"button",onClick:Y,class:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition"}," ยกเลิก "),t("button",{type:"submit",disabled:L.value,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[L.value?(n(),d("svg",rt,e[35]||(e[35]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):c("",!0),g(" "+s(L.value?"กำลังอัปโหลด...":"อัปโหลด"),1)],8,lt)])],32)])):c("",!0)]),t("div",ot,[t("div",at,[t("div",st,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ค้นหา",-1)),t("div",nt,[y(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>j.value=r),type:"text",class:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"ค้นหาชื่อเรื่อง, ผู้วิจัย, หรือบทคัดย่อ..."},null,512),[[A,j.value]]),e[36]||(e[36]=t("svg",{class:"absolute left-3 top-3 h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),t("div",dt,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"หมวดหมู่",-1)),y(t("select",{"onUpdate:modelValue":e[7]||(e[7]=r=>z.value=r),class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e[38]||(e[38]=t("option",{value:""},"ทั้งหมด",-1)),(n(!0),d(N,null,T(H.value,r=>(n(),d("option",{key:r,value:r},s(r),9,it))),128))],512),[[I,z.value]])]),t("div",ut,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ปี",-1)),y(t("select",{"onUpdate:modelValue":e[8]||(e[8]=r=>U.value=r),class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e[40]||(e[40]=t("option",{value:""},"ทั้งหมด",-1)),(n(!0),d(N,null,T(Z.value,r=>(n(),d("option",{key:r,value:r},s(r),9,gt))),128))],512),[[I,U.value]])])])]),t("div",ct,[t("div",vt,[t("h2",pt," รายการงานวิจัย ("+s(f.value.length)+") ",1)]),t("div",mt,[(n(!0),d(N,null,T(X.value,r=>(n(),d("div",{key:r.id,class:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition"},[t("div",xt,[t("div",yt,[t("div",bt,[t("h3",kt,s(r.title),1),t("span",ft,s(r.category),1)]),t("div",ht,[e[42]||(e[42]=t("span",{class:"font-medium"},"ผู้วิจัย:",-1)),g(" "+s(r.author)+" | ",1),e[43]||(e[43]=t("span",{class:"font-medium"},"ปี:",-1)),g(" "+s(r.year)+" | ",1),e[44]||(e[44]=t("span",{class:"font-medium"},"อัปโหลด:",-1)),g(" "+s(R(r.uploadDate)),1)]),r.abstract?(n(),d("p",wt,s(r.abstract),1)):c("",!0),t("div",_t,[t("button",{onClick:M=>ne(r),class:"text-blue-600 hover:text-blue-700 flex items-center"},e[45]||(e[45]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),g(" ดูไฟล์ ")]),8,Ct),t("button",{onClick:M=>ie(r),class:"text-green-600 hover:text-green-700 flex items-center"},e[46]||(e[46]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-4-4m4 4l4-4m-6 4h8"})],-1),g(" ดาวน์โหลด ")]),8,Mt),t("button",{onClick:M=>ue(r),class:"text-yellow-600 hover:text-yellow-700 flex items-center"},e[47]||(e[47]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),g(" แก้ไข ")]),8,Dt),t("button",{onClick:M=>ge(r),class:"text-red-600 hover:text-red-700 flex items-center"},e[48]||(e[48]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),g(" ลบ ")]),8,Lt),r.latitude&&r.longitude?(n(),d("button",{key:0,onClick:M=>de(r),class:"text-indigo-600 hover:text-indigo-700 flex items-center"},e[49]||(e[49]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1),g(" ดูตำแหน่ง ")]),8,jt)):c("",!0)])]),e[50]||(e[50]=t("div",{class:"ml-4 flex-shrink-0"},[t("div",{class:"w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1))])]))),128))]),f.value.length>C.value?(n(),d("div",Bt,[t("div",Vt,[t("div",At," แสดง "+s((m.value-1)*C.value+1)+" - "+s(Math.min(m.value*C.value,f.value.length))+" จาก "+s(f.value.length)+" รายการ ",1),t("div",zt,[t("button",{onClick:e[9]||(e[9]=r=>m.value--),disabled:m.value===1,class:"px-3 py-1 rounded-md bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ก่อนหน้า ",8,Ut),t("span",St," หน้า "+s(m.value)+" จาก "+s(O.value),1),t("button",{onClick:e[10]||(e[10]=r=>m.value++),disabled:m.value===O.value,class:"px-3 py-1 rounded-md bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ถัดไป ",8,Ft)])])])):c("",!0),f.value.length===0?(n(),d("div",Nt,e[51]||(e[51]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"ไม่พบงานวิจัย",-1),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"เริ่มต้นโดยการอัปโหลดงานวิจัย Abstract แรกของคุณ",-1)]))):c("",!0)])])]),B.value?(n(),d("div",Tt,[t("div",Ht,[t("div",$t,[t("h3",It,s(k.value?"ตำแหน่งงานวิจัย":"ระบุตำแหน่งบนแผนที่"),1),k.value?c("",!0):(n(),d("p",Pt," คลิกบนแผนที่เพื่อปักหมุดตำแหน่งที่ต้องการ ")),t("div",Et,[V(u,null,{default:$(()=>[V(P(G),{zoom:F.value,center:S.value,onClick:re,"use-global-leaflet":!1,class:"h-full w-full"},{default:$(()=>[V(P(K),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'}),p.value?(n(),ye(P(Q),{key:0,"lat-lng":p.value},null,8,["lat-lng"])):c("",!0)]),_:1},8,["zoom","center"])]),_:1})])]),t("div",qt,[t("button",{onClick:ae,class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"},s(k.value?"ปิด":"ยกเลิก"),1),k.value?c("",!0):(n(),d("button",{key:0,onClick:oe,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," ยืนยันตำแหน่ง "))])])])):c("",!0),_.value?(n(),d("div",Ot,[t("div",{class:xe(["px-6 py-4 rounded-lg shadow-lg",_.value.type==="success"?"bg-green-100 text-green-800 border-l-4 border-green-500":"bg-red-100 text-red-800 border-l-4 border-red-500"])},[t("div",Rt,[_.value.type==="success"?(n(),d("svg",Yt,e[52]||(e[52]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(n(),d("svg",Gt,e[53]||(e[53]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))),g(" "+s(_.value.text),1)])],2)])):c("",!0)])}}}),rl=he(Kt,[["__scopeId","data-v-59f8aefb"]]);export{rl as default};
